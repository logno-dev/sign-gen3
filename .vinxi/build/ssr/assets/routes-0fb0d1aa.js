const a=[{type:"page",$component:{src:"src/routes/[...404].jsx?pick=default&pick=$css",build:()=>import("../_...404_.js"),import:()=>import("../_...404_.js")},path:"/*404",filePath:"/home/logno/projects/sign-gen3/src/routes/[...404].jsx"},{type:"page",$component:{src:"src/routes/about.jsx?pick=default&pick=$css",build:()=>import("../about.js"),import:()=>import("../about.js")},path:"/about",filePath:"/home/logno/projects/sign-gen3/src/routes/about.jsx"},{type:"page",$component:{src:"src/routes/index.jsx?pick=default&pick=$css",build:()=>import("../index.js"),import:()=>import("../index.js")},path:"/",filePath:"/home/logno/projects/sign-gen3/src/routes/index.jsx"}],d=f(a.filter(n=>n.type==="page")),h=m(a.filter(n=>n.type==="api"));function x(n,s){const e=n.split("/").filter(Boolean);e:for(const t of h){const o=t.matchSegments;if(e.length<o.length||!t.wildcard&&e.length>o.length)continue;for(let i=0;i<o.length;i++){const p=o[i];if(p&&e[i]!==p)continue e}const r=t[`$${s}`];if(r==="skip"||r===void 0)return;const c={};for(const{type:i,name:p,index:l}of t.params)i===":"?c[p]=e[l]:c[p]=e.slice(l).join("/");return{handler:r,params:c}}}function f(n){function s(e,t,o,r){const c=Object.values(e).find(i=>o.startsWith(i.id+"/"));return c?(s(c.children||(c.children=[]),t,o.slice(c.id.length)),e):(e.push({...t,id:o,path:o.replace(/\/\([^)/]+\)/g,"")}),e)}return n.sort((e,t)=>e.path.length-t.path.length).reduce((e,t)=>s(e,t,t.path,t.path),[])}function m(n){return n.flatMap(s=>u(s.path).map(t=>({...s,path:t}))).map(g).sort((s,e)=>e.score-s.score)}function u(n){let s=/(\/?\:[^\/]+)\?/.exec(n);if(!s)return[n];let e=n.slice(0,s.index),t=n.slice(s.index+s[0].length);const o=[e,e+=s[1]];for(;s=/^(\/\:[^\/]+)\?/.exec(t);)o.push(e+=s[1]),t=t.slice(s[0].length);return u(t).reduce((r,c)=>[...r,...o.map(i=>i+c)],[])}function g(n){const s=n.path.split("/").filter(Boolean),e=[],t=[];let o=0,r=!1;for(const[c,i]of s.entries())if(i[0]===":"){const p=i.slice(1);o+=3,e.push({type:":",name:p,index:c}),t.push(null)}else i[0]==="*"?(o-=1,e.push({type:"*",name:i.slice(1),index:c}),r=!0):(o+=4,i.match(/^\(.+\)$/)||t.push(i));return{...n,score:o,params:e,matchSegments:t,wildcard:r}}export{x as m,d as p};
